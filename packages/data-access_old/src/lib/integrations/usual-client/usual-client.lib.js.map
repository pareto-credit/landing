{"version":3,"sources":["../../../../../../../../libs/shared/data-access/src/lib/integrations/usual-client/usual-client.lib.ts"],"sourcesContent":["import axios, { Axios, CreateAxiosDefaults } from 'axios'\nimport { BNify } from '../../core'\nimport { IntegrationClientModel } from '../integration-client.model'\n\nexport class UsualClient implements IntegrationClientModel {\n  // Axios instance\n  private axios: Axios\n\n  constructor() {\n    this.axios = this.initAxios()\n  }\n\n  /**\n   * Axios initialization\n   */\n  private initAxios() {\n    const options: CreateAxiosDefaults = {\n      baseURL: 'https://app.usual.money/api/',\n      headers: {\n        'content-type': 'application/json',\n      },\n    }\n    return axios.create(options)\n  }\n\n  // Methods\n\n  public async getApr(tokenSymbol: string): Promise<number> {\n    switch (tokenSymbol) {\n      case 'USD0++':\n        return this.getUsd0Apr()\n      default:\n        return 0\n    }\n  }\n\n  public async getUsd0Apr(): Promise<number> {\n    return this.axios\n      .request({\n        url: 'rewards/rates/USD0++',\n        method: 'GET',\n        responseType: 'json',\n      })\n      .then((response) =>\n        BNify(response?.data.rewards[0].apr).times(100).toNumber()\n      )\n      .catch(() => 0)\n  }\n}\n"],"names":["axios","BNify","UsualClient","initAxios","options","baseURL","headers","create","getApr","tokenSymbol","getUsd0Apr","request","url","method","responseType","then","response","data","rewards","apr","times","toNumber","catch","constructor"],"mappings":"AAAA,OAAOA,WAA2C,QAAO;AACzD,SAASC,KAAK,QAAQ,aAAY;AAGlC,OAAO,MAAMC;IAQX;;GAEC,GACD,AAAQC,YAAY;QAClB,MAAMC,UAA+B;YACnCC,SAAS;YACTC,SAAS;gBACP,gBAAgB;YAClB;QACF;QACA,OAAON,MAAMO,MAAM,CAACH;IACtB;IAEA,UAAU;IAEV,MAAaI,OAAOC,WAAmB,EAAmB;QACxD,OAAQA;YACN,KAAK;gBACH,OAAO,IAAI,CAACC,UAAU;YACxB;gBACE,OAAO;QACX;IACF;IAEA,MAAaA,aAA8B;QACzC,OAAO,IAAI,CAACV,KAAK,CACdW,OAAO,CAAC;YACPC,KAAK;YACLC,QAAQ;YACRC,cAAc;QAChB,GACCC,IAAI,CAAC,CAACC,WACLf,MAAMe,4BAAAA,SAAUC,IAAI,CAACC,OAAO,CAAC,EAAE,CAACC,GAAG,EAAEC,KAAK,CAAC,KAAKC,QAAQ,IAEzDC,KAAK,CAAC,IAAM;IACjB;IAvCAC,aAAc;QACZ,IAAI,CAACvB,KAAK,GAAG,IAAI,CAACG,SAAS;IAC7B;AAsCF"}