{"version":3,"sources":["../../../../../../../libs/shared/data-access/src/lib/access-tokens/access-token.model.ts"],"sourcesContent":["import S from 'fluent-json-schema'\nimport { sDateString, sStringId } from '../core'\n\n/**\n * Client Chain interface\n */\nexport interface AccessToken extends AccessTokenData {\n  _id: string\n  /**\n   * Creation date\n   */\n  createdAt: string\n  /**\n   * Token expiration date\n   */\n  expiresOn?: string\n}\n\nexport function sAccessToken() {\n  return S.object()\n    .id('#accessToken')\n    .additionalProperties(false)\n    .prop('_id', sStringId())\n    .description('Access Token ID.')\n    .required()\n    .prop('createdAt', sDateString())\n    .description('Access Token creation date.')\n    .required()\n    .prop('createdBy', sStringId())\n    .description('The IDentifier of the creation subject.')\n    .required()\n    .extend(sAccessTokenData())\n}\n\nexport interface AccessTokenData {\n  /**\n   * Token JWT signature\n   */\n  signature: string\n  /**\n   * Permission level\n   */\n  permission: 'READ' | 'WRITE'\n  /**\n   * User assigned\n   */\n  userId?: string\n  /**\n   * Creation user Id\n   */\n  createdBy?: string\n}\n\nexport function sAccessTokenData() {\n  return S.object()\n    .additionalProperties(false)\n    .prop('signature', S.string())\n    .required()\n    .prop('permission', S.string().enum(['READ', 'WRITE']))\n    .required()\n    .prop('userId', sStringId())\n    .prop('expirationDate', sDateString())\n}\n\nexport interface AccessTokenSignature {\n  userId?: string\n  tokenId: string\n}\n\nexport const ACCESS_TOKENS_ROUTES_KEY = 'access-tokens'\n\nexport enum AccessTokenRoutes {\n  v1Create = `v1/${ACCESS_TOKENS_ROUTES_KEY}`,\n  v1Delete = `v1/${ACCESS_TOKENS_ROUTES_KEY}/:accessTokenId`,\n}\n"],"names":["S","sDateString","sStringId","sAccessToken","object","id","additionalProperties","prop","description","required","extend","sAccessTokenData","string","enum","ACCESS_TOKENS_ROUTES_KEY","AccessTokenRoutes"],"mappings":"AAAA,OAAOA,OAAO,qBAAoB;AAClC,SAASC,WAAW,EAAEC,SAAS,QAAQ,UAAS;AAiBhD,OAAO,SAASC;IACd,OAAOH,EAAEI,MAAM,GACZC,EAAE,CAAC,gBACHC,oBAAoB,CAAC,OACrBC,IAAI,CAAC,OAAOL,aACZM,WAAW,CAAC,oBACZC,QAAQ,GACRF,IAAI,CAAC,aAAaN,eAClBO,WAAW,CAAC,+BACZC,QAAQ,GACRF,IAAI,CAAC,aAAaL,aAClBM,WAAW,CAAC,2CACZC,QAAQ,GACRC,MAAM,CAACC;AACZ;AAqBA,OAAO,SAASA;IACd,OAAOX,EAAEI,MAAM,GACZE,oBAAoB,CAAC,OACrBC,IAAI,CAAC,aAAaP,EAAEY,MAAM,IAC1BH,QAAQ,GACRF,IAAI,CAAC,cAAcP,EAAEY,MAAM,GAAGC,IAAI,CAAC;QAAC;QAAQ;KAAQ,GACpDJ,QAAQ,GACRF,IAAI,CAAC,UAAUL,aACfK,IAAI,CAAC,kBAAkBN;AAC5B;AAOA,OAAO,MAAMa,2BAA2B,gBAAe;;UAE3CC;sDACC,CAAC,GAAG,EAAED,yBAAyB,CAAC;sDAChC,CAAC,GAAG,EAAEA,yBAAyB,eAAe,CAAC;GAFhDC,sBAAAA"}