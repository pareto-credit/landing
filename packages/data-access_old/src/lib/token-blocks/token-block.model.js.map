{"version":3,"sources":["../../../../../../../libs/shared/data-access/src/lib/token-blocks/token-block.model.ts"],"sourcesContent":["import S from 'fluent-json-schema'\nimport {\n  Block,\n  ClientEntity,\n  PageSearchQuery,\n  iBigInt,\n  sBCAddress,\n  sBigInt,\n  sBlock,\n  sClientEntity,\n  sPageSearchQuery,\n  sStringId,\n} from '../core'\nimport { TOKEN_BLOCKS_ROUTES_KEY } from './token-block.const'\n\n/**\n * Client Token interface\n */\nexport interface TokenBlock extends TokenBlockData, ClientEntity {}\n\nexport function sTokenBlock(isPartial?: boolean) {\n  return S.object()\n    .id('#tokenBlock')\n    .additionalProperties(false)\n    .extend(sClientEntity(isPartial))\n    .extend(sTokenBlockData(isPartial))\n}\n\nexport interface TokenBlockData {\n  block: Block\n  tokenId: string\n  tokenAddress: string\n  price: iBigInt\n}\n\nexport function sTokenBlockData(isPartial?: boolean) {\n  return S.object()\n    .additionalProperties(false)\n    .prop('block', sBlock())\n    .prop('tokenId', sStringId())\n    .description('The IDentifier of token.')\n    .prop('tokenAddress', sBCAddress())\n    .description('The blockchain address of the token.')\n    .prop('price', sBigInt())\n    .description('The token price.')\n    .required(isPartial ? [] : ['block', 'tokenId', 'tokenAddress', 'price'])\n}\n\nexport type TokenBlockFields =\n  | '_id'\n  | 'block'\n  | 'tokenId'\n  | 'tokenAddress'\n  | 'price'\n  | 'createdAt'\n  | 'createdBy'\n  | 'updatedAt'\n  | 'updatedBy'\n\nexport const TOKEN_BLOCK_FIELDS = [\n  '_id',\n  'block',\n  'tokenId',\n  'tokenAddress',\n  'price',\n  'createdAt',\n  'createdBy',\n  'updatedAt',\n  'updatedBy',\n]\n\nexport const TOKEN_BLOCK_SORT_FIELDS = ['block', 'timestamp']\n\nexport interface TokenBlockSearchQuery\n  extends PageSearchQuery<'block' | 'timestamp', TokenBlockFields> {\n  tokenId?: string\n  block?: string | string[]\n  tokenAddress?: string\n  'timestamp:gte'?: number\n  'timestamp:lte'?: number\n}\n\nexport function sTokenBlocksSearchQuery() {\n  return S.object()\n    .additionalProperties(false)\n    .prop('tokenId', sStringId())\n    .description('Token IDentifier to search.')\n    .prop('tokenAddress', sBCAddress())\n    .description('Token blockchain address to search.')\n    .prop('block', S.array().minItems(1).maxItems(200).items(S.number()))\n    .description('Block number of the token block.')\n    .prop('timestamp:gte', S.number())\n    .description('Start timestamp of the token block.')\n    .prop('timestamp:lte', S.number())\n    .description('End timestamp of the token block.')\n    .extend(sPageSearchQuery(TOKEN_BLOCK_FIELDS, TOKEN_BLOCK_SORT_FIELDS))\n}\n\nexport enum TokenBlockRoutes {\n  v1Create = `v1/${TOKEN_BLOCKS_ROUTES_KEY}`,\n  v1Delete = `v1/${TOKEN_BLOCKS_ROUTES_KEY}/:tokenBlockId`,\n  v1Read = `v1/${TOKEN_BLOCKS_ROUTES_KEY}/:tokenBlockId`,\n  v1Update = `v1/${TOKEN_BLOCKS_ROUTES_KEY}/:tokenBlockId`,\n  v1Search = `v1/${TOKEN_BLOCKS_ROUTES_KEY}`,\n}\n"],"names":["S","sBCAddress","sBigInt","sBlock","sClientEntity","sPageSearchQuery","sStringId","TOKEN_BLOCKS_ROUTES_KEY","sTokenBlock","isPartial","object","id","additionalProperties","extend","sTokenBlockData","prop","description","required","TOKEN_BLOCK_FIELDS","TOKEN_BLOCK_SORT_FIELDS","sTokenBlocksSearchQuery","array","minItems","maxItems","items","number","TokenBlockRoutes"],"mappings":"AAAA,OAAOA,OAAO,qBAAoB;AAClC,SAKEC,UAAU,EACVC,OAAO,EACPC,MAAM,EACNC,aAAa,EACbC,gBAAgB,EAChBC,SAAS,QACJ,UAAS;AAChB,SAASC,uBAAuB,QAAQ,sBAAqB;AAO7D,OAAO,SAASC,YAAYC,SAAmB;IAC7C,OAAOT,EAAEU,MAAM,GACZC,EAAE,CAAC,eACHC,oBAAoB,CAAC,OACrBC,MAAM,CAACT,cAAcK,YACrBI,MAAM,CAACC,gBAAgBL;AAC5B;AASA,OAAO,SAASK,gBAAgBL,SAAmB;IACjD,OAAOT,EAAEU,MAAM,GACZE,oBAAoB,CAAC,OACrBG,IAAI,CAAC,SAASZ,UACdY,IAAI,CAAC,WAAWT,aAChBU,WAAW,CAAC,4BACZD,IAAI,CAAC,gBAAgBd,cACrBe,WAAW,CAAC,wCACZD,IAAI,CAAC,SAASb,WACdc,WAAW,CAAC,oBACZC,QAAQ,CAACR,YAAY,EAAE,GAAG;QAAC;QAAS;QAAW;QAAgB;KAAQ;AAC5E;AAaA,OAAO,MAAMS,qBAAqB;IAChC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD,CAAA;AAED,OAAO,MAAMC,0BAA0B;IAAC;IAAS;CAAY,CAAA;AAW7D,OAAO,SAASC;IACd,OAAOpB,EAAEU,MAAM,GACZE,oBAAoB,CAAC,OACrBG,IAAI,CAAC,WAAWT,aAChBU,WAAW,CAAC,+BACZD,IAAI,CAAC,gBAAgBd,cACrBe,WAAW,CAAC,uCACZD,IAAI,CAAC,SAASf,EAAEqB,KAAK,GAAGC,QAAQ,CAAC,GAAGC,QAAQ,CAAC,KAAKC,KAAK,CAACxB,EAAEyB,MAAM,KAChET,WAAW,CAAC,oCACZD,IAAI,CAAC,iBAAiBf,EAAEyB,MAAM,IAC9BT,WAAW,CAAC,uCACZD,IAAI,CAAC,iBAAiBf,EAAEyB,MAAM,IAC9BT,WAAW,CAAC,qCACZH,MAAM,CAACR,iBAAiBa,oBAAoBC;AACjD;;UAEYO;oDACC,CAAC,GAAG,EAAEnB,wBAAwB,CAAC;oDAC/B,CAAC,GAAG,EAAEA,wBAAwB,cAAc,CAAC;kDAC/C,CAAC,GAAG,EAAEA,wBAAwB,cAAc,CAAC;oDAC3C,CAAC,GAAG,EAAEA,wBAAwB,cAAc,CAAC;oDAC7C,CAAC,GAAG,EAAEA,wBAAwB,CAAC;GALhCmB,qBAAAA"}