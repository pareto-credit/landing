{"version":3,"sources":["../../../../../../../../libs/shared/data-access/src/lib/vault-epochs/libs/vault-epochs-client.lib.ts"],"sourcesContent":["import { Axios } from 'axios'\nimport {\n  VaultEpoch,\n  VaultEpochData,\n  VaultEpochRoutes,\n  VaultEpochsClientModel,\n  VaultEpochPdfQuery,\n  VaultEpochsSearchQuery,\n} from '../vault-epoch.model'\nimport { ApiEntity, PageSearchQuery, uriFy } from '../../core'\nimport { WalletEpochStats } from '../../vaults/vault.model'\n\nexport class VaultEpochsClient\n  extends ApiEntity\n  implements VaultEpochsClientModel\n{\n  constructor(axios: Axios) {\n    super(axios)\n  }\n\n  /**\n   * Create a vault epoch\n   * @param body - the vault epoch data\n   * @returns the promise for create a new vault epoch\n   */\n  public create(body: VaultEpochData) {\n    return this._create<VaultEpoch>(VaultEpochRoutes.v1Create, body)\n  }\n\n  /**\n   * Search epochs by params\n   * @param searchParams - the search vault epochs search params\n   * @returns the promise for search epochs\n   */\n  public search(searchParams?: VaultEpochsSearchQuery) {\n    return this._search<VaultEpoch>(VaultEpochRoutes.v1Search, searchParams)\n  }\n\n  /**\n   * Search all epoch by params\n   * @param searchParams - the vault\n   * @returns\n   */\n  public searchAll(searchParams?: VaultEpochsSearchQuery) {\n    return this._searchAll<VaultEpoch>(VaultEpochRoutes.v1Search, searchParams)\n  }\n\n  /**\n   * List epochs by params\n   * @param searchParams - the search vault epochs search params\n   * @returns the promise for list epochs\n   */\n  public list(searchParams?: VaultEpochsSearchQuery) {\n    return this._list<VaultEpoch>(VaultEpochRoutes.v1Search, searchParams)\n  }\n\n  /**\n   * List all epochs by params\n   * @param searchParams - the search vault epochs search params\n   * @returns the promise for list epochs\n   */\n  public listAll(searchParams?: VaultEpochsSearchQuery) {\n    return this._listAll<VaultEpoch>(VaultEpochRoutes.v1Search, searchParams)\n  }\n\n  /**\n   * Find an epoch by params\n   * @param searchParams - the search params\n   * @returns the promise for find an epoch\n   */\n  public findOne(searchParams?: VaultEpochsSearchQuery) {\n    return this._findOne<VaultEpoch>(VaultEpochRoutes.v1Search, searchParams)\n  }\n\n  /**\n   * List holders for a specific epoch\n   * @param vaultEpochId - the vault epoch identifier\n   * @param searchParams - pagination options\n   * @returns the promise for epoch holders\n   */\n  public holders(vaultEpochId: string, searchParams?: PageSearchQuery) {\n    const url = VaultEpochRoutes.v1Holders.replace(\n      ':vaultEpochId',\n      vaultEpochId\n    )\n\n    return this._search<WalletEpochStats>(url, searchParams)\n  }\n\n  /**\n   * Download vault epoch PDF\n   * @param vaultEpochId - the vault epoch identifier\n   * @param searchParams - the query options\n   * @returns the PDF as ArrayBuffer\n   */\n  public pdf(vaultEpochId: string, searchParams: VaultEpochPdfQuery) {\n    const url = VaultEpochRoutes.v1Pdf.replace(':vaultEpochId', vaultEpochId)\n\n    return this.axios\n      .request<ArrayBuffer>({\n        url,\n        method: 'GET',\n        params: new URLSearchParams(uriFy(searchParams)),\n        responseType: 'arraybuffer',\n      })\n      .then((response) => response.data)\n  }\n}\n"],"names":["VaultEpochsClient","ApiEntity","create","body","_create","VaultEpochRoutes","v1Create","search","searchParams","_search","v1Search","searchAll","_searchAll","list","_list","listAll","_listAll","findOne","_findOne","holders","vaultEpochId","url","v1Holders","replace","pdf","v1Pdf","axios","request","method","params","URLSearchParams","uriFy","responseType","then","response","data","constructor"],"mappings":";;;;+BAYaA;;;eAAAA;;;iCAJN;sBAC2C;AAG3C,IAAA,AAAMA,oBAAN,MAAMA,0BACHC,eAAS;IAOjB;;;;GAIC,GACD,AAAOC,OAAOC,IAAoB,EAAE;QAClC,OAAO,IAAI,CAACC,OAAO,CAAaC,iCAAgB,CAACC,QAAQ,EAAEH;IAC7D;IAEA;;;;GAIC,GACD,AAAOI,OAAOC,YAAqC,EAAE;QACnD,OAAO,IAAI,CAACC,OAAO,CAAaJ,iCAAgB,CAACK,QAAQ,EAAEF;IAC7D;IAEA;;;;GAIC,GACD,AAAOG,UAAUH,YAAqC,EAAE;QACtD,OAAO,IAAI,CAACI,UAAU,CAAaP,iCAAgB,CAACK,QAAQ,EAAEF;IAChE;IAEA;;;;GAIC,GACD,AAAOK,KAAKL,YAAqC,EAAE;QACjD,OAAO,IAAI,CAACM,KAAK,CAAaT,iCAAgB,CAACK,QAAQ,EAAEF;IAC3D;IAEA;;;;GAIC,GACD,AAAOO,QAAQP,YAAqC,EAAE;QACpD,OAAO,IAAI,CAACQ,QAAQ,CAAaX,iCAAgB,CAACK,QAAQ,EAAEF;IAC9D;IAEA;;;;GAIC,GACD,AAAOS,QAAQT,YAAqC,EAAE;QACpD,OAAO,IAAI,CAACU,QAAQ,CAAab,iCAAgB,CAACK,QAAQ,EAAEF;IAC9D;IAEA;;;;;GAKC,GACD,AAAOW,QAAQC,YAAoB,EAAEZ,YAA8B,EAAE;QACnE,MAAMa,MAAMhB,iCAAgB,CAACiB,SAAS,CAACC,OAAO,CAC5C,iBACAH;QAGF,OAAO,IAAI,CAACX,OAAO,CAAmBY,KAAKb;IAC7C;IAEA;;;;;GAKC,GACD,AAAOgB,IAAIJ,YAAoB,EAAEZ,YAAgC,EAAE;QACjE,MAAMa,MAAMhB,iCAAgB,CAACoB,KAAK,CAACF,OAAO,CAAC,iBAAiBH;QAE5D,OAAO,IAAI,CAACM,KAAK,CACdC,OAAO,CAAc;YACpBN;YACAO,QAAQ;YACRC,QAAQ,IAAIC,gBAAgBC,IAAAA,WAAK,EAACvB;YAClCwB,cAAc;QAChB,GACCC,IAAI,CAAC,CAACC,WAAaA,SAASC,IAAI;IACrC;IA1FAC,YAAYV,KAAY,CAAE;QACxB,KAAK,CAACA;IACR;AAyFF"}