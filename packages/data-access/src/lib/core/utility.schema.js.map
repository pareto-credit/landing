{"version":3,"sources":["../../../../../../../libs/shared/data-access/src/lib/core/utility.schema.ts"],"sourcesContent":["import S from 'fluent-json-schema'\n\n/**\n * MongoDB ObjectId schema\n */\nexport function sObjectId() {\n  return S.raw({\n    type: 'object',\n    instanceof: 'ObjectId',\n  })\n}\n\n/**\n * MongoDB Date schema schema\n */\nexport function sDate() {\n  return S.raw({\n    type: 'object',\n    instanceof: 'Date',\n  })\n}\n\n/**\n * Email format\n */\nexport function sEmail() {\n  return S.string().format('email')\n}\n\n/**\n * MongoDB ObjectId string format schema\n */\nexport function sStringId() {\n  return S.string().pattern(/^[a-f0-9]{24}$/)\n}\n\n/**\n * Percentage value\n */\nexport function sPercentage() {\n  return S.number().minimum(0).maximum(100)\n}\n\n/**\n * Date ISO String schema\n */\nexport function sDateString() {\n  return S.string().pattern(/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}Z$/)\n}\n\n/**\n * BlockChain Address schema\n */\nexport function sBCAddress() {\n  return S.string().pattern(/^0x[a-fA-F0-9]{40}$/)\n}\n\n/**\n * BlockChain Hash schema\n */\nexport function sBCHash() {\n  return S.string().pattern(/^0x[a-fA-F0-9]{64}$/)\n}\n\n/**\n * BlockChain Hex schema\n */\nexport function sHexString() {\n  return S.string().pattern(/^0x[a-fA-F0-9]+$/)\n}\n\n/**\n * Block schema\n */\nexport function sBlock() {\n  return (\n    S.object()\n      .additionalProperties(false)\n      // Backward-compatible\n      .prop('number', S.number())\n      .required()\n      .prop('timestamp', S.number())\n      .required()\n  )\n}\n\n/**\n * Reward schema\n */\nexport function sReward() {\n  return S.object()\n    .additionalProperties(false)\n    .prop('tokenId', sStringId())\n    .required()\n    .prop('amount', sBigInt())\n    .required()\n    .prop('amountUSD', sBigInt())\n    .required()\n    .prop('APR', S.number())\n    .required()\n    .prop('percentage', S.number())\n    .required()\n}\n\n/**\n * All printable ASCII chars, minus the \"DEL\" char.\n */\nexport function sPrintableASCII() {\n  return S.string().pattern(/^[\\x20-\\x7E]*$/)\n}\n\n/**\n * Password schema\n */\nexport function sPassword() {\n  return sPrintableASCII().minLength(8)\n}\n\n/**\n * BigInt schema\n */\nexport function sBigInt() {\n  return S.string() /* .format('bigint') */\n}\n\n/**\n * Locales management\n */\nexport function sLocales() {\n  return S.object()\n    .additionalProperties(false)\n    .prop('en', S.string())\n    .required()\n}\n"],"names":["S","sObjectId","raw","type","instanceof","sDate","sEmail","string","format","sStringId","pattern","sPercentage","number","minimum","maximum","sDateString","sBCAddress","sBCHash","sHexString","sBlock","object","additionalProperties","prop","required","sReward","sBigInt","sPrintableASCII","sPassword","minLength","sLocales"],"mappings":"AAAA,OAAOA,OAAO,qBAAoB;AAElC;;CAEC,GACD,OAAO,SAASC;IACd,OAAOD,EAAEE,GAAG,CAAC;QACXC,MAAM;QACNC,YAAY;IACd;AACF;AAEA;;CAEC,GACD,OAAO,SAASC;IACd,OAAOL,EAAEE,GAAG,CAAC;QACXC,MAAM;QACNC,YAAY;IACd;AACF;AAEA;;CAEC,GACD,OAAO,SAASE;IACd,OAAON,EAAEO,MAAM,GAAGC,MAAM,CAAC;AAC3B;AAEA;;CAEC,GACD,OAAO,SAASC;IACd,OAAOT,EAAEO,MAAM,GAAGG,OAAO,CAAC;AAC5B;AAEA;;CAEC,GACD,OAAO,SAASC;IACd,OAAOX,EAAEY,MAAM,GAAGC,OAAO,CAAC,GAAGC,OAAO,CAAC;AACvC;AAEA;;CAEC,GACD,OAAO,SAASC;IACd,OAAOf,EAAEO,MAAM,GAAGG,OAAO,CAAC;AAC5B;AAEA;;CAEC,GACD,OAAO,SAASM;IACd,OAAOhB,EAAEO,MAAM,GAAGG,OAAO,CAAC;AAC5B;AAEA;;CAEC,GACD,OAAO,SAASO;IACd,OAAOjB,EAAEO,MAAM,GAAGG,OAAO,CAAC;AAC5B;AAEA;;CAEC,GACD,OAAO,SAASQ;IACd,OAAOlB,EAAEO,MAAM,GAAGG,OAAO,CAAC;AAC5B;AAEA;;CAEC,GACD,OAAO,SAASS;IACd,OACEnB,EAAEoB,MAAM,GACLC,oBAAoB,CAAC,MACtB,sBAAsB;KACrBC,IAAI,CAAC,UAAUtB,EAAEY,MAAM,IACvBW,QAAQ,GACRD,IAAI,CAAC,aAAatB,EAAEY,MAAM,IAC1BW,QAAQ;AAEf;AAEA;;CAEC,GACD,OAAO,SAASC;IACd,OAAOxB,EAAEoB,MAAM,GACZC,oBAAoB,CAAC,OACrBC,IAAI,CAAC,WAAWb,aAChBc,QAAQ,GACRD,IAAI,CAAC,UAAUG,WACfF,QAAQ,GACRD,IAAI,CAAC,aAAaG,WAClBF,QAAQ,GACRD,IAAI,CAAC,OAAOtB,EAAEY,MAAM,IACpBW,QAAQ,GACRD,IAAI,CAAC,cAActB,EAAEY,MAAM,IAC3BW,QAAQ;AACb;AAEA;;CAEC,GACD,OAAO,SAASG;IACd,OAAO1B,EAAEO,MAAM,GAAGG,OAAO,CAAC;AAC5B;AAEA;;CAEC,GACD,OAAO,SAASiB;IACd,OAAOD,kBAAkBE,SAAS,CAAC;AACrC;AAEA;;CAEC,GACD,OAAO,SAASH;IACd,OAAOzB,EAAEO,MAAM;AAAG,qBAAqB,GACzC;AAEA;;CAEC,GACD,OAAO,SAASsB;IACd,OAAO7B,EAAEoB,MAAM,GACZC,oBAAoB,CAAC,OACrBC,IAAI,CAAC,MAAMtB,EAAEO,MAAM,IACnBgB,QAAQ;AACb"}