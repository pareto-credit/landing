{"version":3,"sources":["../../../../../../../libs/shared/data-access/src/lib/campaign-points/campaign-points.model.ts"],"sourcesContent":["import S from 'fluent-json-schema'\nimport {\n  ClientEntity,\n  iBigInt,\n  Page,\n  PageSearchQuery,\n  sBCAddress,\n  sBigInt,\n  sClientEntity,\n  sPageSearchQuery,\n  sStringId,\n} from '../core'\nimport { CAMPAIGN_POINTS_ROUTES_KEY } from './campaign-points.const'\n\n/**\n * Campaign Point interface\n */\nexport interface CampaignPoint extends CampaignPointData, ClientEntity {}\n\nexport function sCampaignPoint(isPartial?: boolean) {\n  return S.object()\n    .id('#campaignPoint')\n    .additionalProperties(false)\n    .extend(sClientEntity(isPartial))\n    .extend(sCampaignPointData(isPartial))\n}\n\nexport interface CampaignPointData {\n  walletId: string\n  walletAddress: string\n  campaignId: string\n  points: number\n  perDay: number\n  rewards?: CampaignPointReward[]\n}\n\nexport function sCampaignPointData(isPartial?: boolean) {\n  return S.object()\n    .additionalProperties(false)\n    .prop('walletId', sStringId())\n    .prop('walletAddress', sBCAddress())\n    .prop('campaignId', sStringId())\n    .prop('points', S.number())\n    .prop('perDay', S.number())\n    .prop('rewards', S.array().items(sCampaignPointReward()))\n    .required(\n      isPartial\n        ? []\n        : ['walletId', 'walletAddress', 'campaignId', 'points', 'perDay']\n    )\n}\n\nexport interface CampaignPointReward {\n  tokenId?: string\n  amount?: iBigInt\n  USD: iBigInt\n}\n\nexport function sCampaignPointReward() {\n  return S.object()\n    .additionalProperties(false)\n    .prop('USD', sBigInt())\n    .required()\n    .prop('tokenId', sStringId())\n    .prop('amount', sBigInt())\n}\n\nexport type CampaignPointFields =\n  | '_id'\n  | 'walletId'\n  | 'walletAddress'\n  | 'campaignId'\n  | 'points'\n  | 'perDay'\n  | 'createdAt'\n  | 'createdBy'\n  | 'updatedAt'\n  | 'updatedBy'\n\nexport type CampaignPointSortFields = '_id' | 'points'\n\nexport const CAMPAIGN_POINT_FIELDS = [\n  '_id',\n  'walletId',\n  'walletAddress',\n  'campaignId',\n  'points',\n  'perDay',\n  'createdAt',\n  'createdBy',\n  'updatedAt',\n  'updatedBy',\n]\n\nexport const CAMPAIGN_POINT_SORT_FIELDS = ['_id', 'points']\n\nexport interface CampaignPointsSearchQuery\n  extends PageSearchQuery<CampaignPointSortFields, CampaignPointFields> {\n  walletId?: string | string[]\n  walletAddress?: string | string[]\n  campaignId?: string | string[]\n}\n\nexport function sCampaignPointsSearchQuery() {\n  return S.object()\n    .additionalProperties(false)\n    .prop('walletId', S.array().minItems(1).maxItems(200).items(sStringId()))\n    .description('The wallet IDentifier.')\n    .prop(\n      'walletAddress',\n      S.array().minItems(1).maxItems(200).items(sBCAddress())\n    )\n    .description('The wallet blockchain address')\n    .prop('campaignId', S.array().minItems(1).maxItems(200).items(sStringId()))\n    .description('The campaign IDentifier.')\n    .extend(sPageSearchQuery(CAMPAIGN_POINT_FIELDS, CAMPAIGN_POINT_SORT_FIELDS))\n}\n\nexport interface CampaignPointClientModel {\n  search: (params?: CampaignPointsSearchQuery) => Promise<Page<CampaignPoint>>\n  searchAll: (\n    params?: CampaignPointsSearchQuery\n  ) => Promise<Page<CampaignPoint>>\n  list: (params?: CampaignPointsSearchQuery) => Promise<CampaignPoint[]>\n  listAll: (params?: CampaignPointsSearchQuery) => Promise<CampaignPoint[]>\n}\n\nexport enum CampaignPointRoutes {\n  v1Search = `v1/${CAMPAIGN_POINTS_ROUTES_KEY}`,\n}\n"],"names":["S","sBCAddress","sBigInt","sClientEntity","sPageSearchQuery","sStringId","CAMPAIGN_POINTS_ROUTES_KEY","sCampaignPoint","isPartial","object","id","additionalProperties","extend","sCampaignPointData","prop","number","array","items","sCampaignPointReward","required","CAMPAIGN_POINT_FIELDS","CAMPAIGN_POINT_SORT_FIELDS","sCampaignPointsSearchQuery","minItems","maxItems","description","CampaignPointRoutes"],"mappings":"AAAA,OAAOA,OAAO,qBAAoB;AAClC,SAKEC,UAAU,EACVC,OAAO,EACPC,aAAa,EACbC,gBAAgB,EAChBC,SAAS,QACJ,UAAS;AAChB,SAASC,0BAA0B,QAAQ,0BAAyB;AAOpE,OAAO,SAASC,eAAeC,SAAmB;IAChD,OAAOR,EAAES,MAAM,GACZC,EAAE,CAAC,kBACHC,oBAAoB,CAAC,OACrBC,MAAM,CAACT,cAAcK,YACrBI,MAAM,CAACC,mBAAmBL;AAC/B;AAWA,OAAO,SAASK,mBAAmBL,SAAmB;IACpD,OAAOR,EAAES,MAAM,GACZE,oBAAoB,CAAC,OACrBG,IAAI,CAAC,YAAYT,aACjBS,IAAI,CAAC,iBAAiBb,cACtBa,IAAI,CAAC,cAAcT,aACnBS,IAAI,CAAC,UAAUd,EAAEe,MAAM,IACvBD,IAAI,CAAC,UAAUd,EAAEe,MAAM,IACvBD,IAAI,CAAC,WAAWd,EAAEgB,KAAK,GAAGC,KAAK,CAACC,yBAChCC,QAAQ,CACPX,YACI,EAAE,GACF;QAAC;QAAY;QAAiB;QAAc;QAAU;KAAS;AAEzE;AAQA,OAAO,SAASU;IACd,OAAOlB,EAAES,MAAM,GACZE,oBAAoB,CAAC,OACrBG,IAAI,CAAC,OAAOZ,WACZiB,QAAQ,GACRL,IAAI,CAAC,WAAWT,aAChBS,IAAI,CAAC,UAAUZ;AACpB;AAgBA,OAAO,MAAMkB,wBAAwB;IACnC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD,CAAA;AAED,OAAO,MAAMC,6BAA6B;IAAC;IAAO;CAAS,CAAA;AAS3D,OAAO,SAASC;IACd,OAAOtB,EAAES,MAAM,GACZE,oBAAoB,CAAC,OACrBG,IAAI,CAAC,YAAYd,EAAEgB,KAAK,GAAGO,QAAQ,CAAC,GAAGC,QAAQ,CAAC,KAAKP,KAAK,CAACZ,cAC3DoB,WAAW,CAAC,0BACZX,IAAI,CACH,iBACAd,EAAEgB,KAAK,GAAGO,QAAQ,CAAC,GAAGC,QAAQ,CAAC,KAAKP,KAAK,CAAChB,eAE3CwB,WAAW,CAAC,iCACZX,IAAI,CAAC,cAAcd,EAAEgB,KAAK,GAAGO,QAAQ,CAAC,GAAGC,QAAQ,CAAC,KAAKP,KAAK,CAACZ,cAC7DoB,WAAW,CAAC,4BACZb,MAAM,CAACR,iBAAiBgB,uBAAuBC;AACpD;;UAWYK;0DACC,CAAC,GAAG,EAAEpB,2BAA2B,CAAC;GADnCoB,wBAAAA"}