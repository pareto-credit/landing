{"version":3,"sources":["../../../../../../../libs/shared/data-access/src/lib/campaign-points/campaign-points.model.ts"],"sourcesContent":["import S from 'fluent-json-schema'\nimport {\n  ClientEntity,\n  iBigInt,\n  Page,\n  PageSearchQuery,\n  sBCAddress,\n  sBigInt,\n  sClientEntity,\n  sPageSearchQuery,\n  sStringId,\n} from '../core'\nimport { CAMPAIGN_POINTS_ROUTES_KEY } from './campaign-points.const'\n\n/**\n * Campaign Point interface\n */\nexport interface CampaignPoint extends CampaignPointData, ClientEntity {}\n\nexport function sCampaignPoint(isPartial?: boolean) {\n  return S.object()\n    .id('#campaignPoint')\n    .additionalProperties(false)\n    .extend(sClientEntity(isPartial))\n    .extend(sCampaignPointData(isPartial))\n}\n\nexport interface CampaignPointData {\n  walletId: string\n  walletAddress: string\n  campaignId: string\n  points: number\n  perDay: number\n  rewards?: CampaignPointReward[]\n}\n\nexport function sCampaignPointData(isPartial?: boolean) {\n  return S.object()\n    .additionalProperties(false)\n    .prop('walletId', sStringId())\n    .prop('walletAddress', sBCAddress())\n    .prop('campaignId', sStringId())\n    .prop('points', S.number())\n    .prop('perDay', S.number())\n    .prop('rewards', S.array().items(sCampaignPointReward()))\n    .required(\n      isPartial\n        ? []\n        : ['walletId', 'walletAddress', 'campaignId', 'points', 'perDay']\n    )\n}\n\nexport interface CampaignPointReward {\n  tokenId?: string\n  amount?: iBigInt\n  USD: iBigInt\n}\n\nexport function sCampaignPointReward() {\n  return S.object()\n    .additionalProperties(false)\n    .prop('USD', sBigInt())\n    .required()\n    .prop('tokenId', sStringId())\n    .prop('amount', sBigInt())\n}\n\nexport type CampaignPointFields =\n  | '_id'\n  | 'walletId'\n  | 'walletAddress'\n  | 'campaignId'\n  | 'points'\n  | 'perDay'\n  | 'createdAt'\n  | 'createdBy'\n  | 'updatedAt'\n  | 'updatedBy'\n\nexport type CampaignPointSortFields = '_id' | 'points'\n\nexport const CAMPAIGN_POINT_FIELDS = [\n  '_id',\n  'walletId',\n  'walletAddress',\n  'campaignId',\n  'points',\n  'perDay',\n  'createdAt',\n  'createdBy',\n  'updatedAt',\n  'updatedBy',\n]\n\nexport const CAMPAIGN_POINT_SORT_FIELDS = ['_id', 'points']\n\nexport interface CampaignPointsSearchQuery\n  extends PageSearchQuery<CampaignPointSortFields, CampaignPointFields> {\n  walletId?: string | string[]\n  walletAddress?: string | string[]\n  campaignId?: string | string[]\n}\n\nexport function sCampaignPointsSearchQuery() {\n  return S.object()\n    .additionalProperties(false)\n    .prop('walletId', S.array().minItems(1).maxItems(200).items(sStringId()))\n    .description('The wallet IDentifier.')\n    .prop(\n      'walletAddress',\n      S.array().minItems(1).maxItems(200).items(sBCAddress())\n    )\n    .description('The wallet blockchain address')\n    .prop('campaignId', S.array().minItems(1).maxItems(200).items(sStringId()))\n    .description('The campaign IDentifier.')\n    .extend(sPageSearchQuery(CAMPAIGN_POINT_FIELDS, CAMPAIGN_POINT_SORT_FIELDS))\n}\n\nexport interface CampaignPointClientModel {\n  search: (params?: CampaignPointsSearchQuery) => Promise<Page<CampaignPoint>>\n  searchAll: (\n    params?: CampaignPointsSearchQuery\n  ) => Promise<Page<CampaignPoint>>\n  list: (params?: CampaignPointsSearchQuery) => Promise<CampaignPoint[]>\n  listAll: (params?: CampaignPointsSearchQuery) => Promise<CampaignPoint[]>\n}\n\nexport enum CampaignPointRoutes {\n  v1Search = `v1/${CAMPAIGN_POINTS_ROUTES_KEY}`,\n}\n"],"names":["CAMPAIGN_POINT_FIELDS","CAMPAIGN_POINT_SORT_FIELDS","sCampaignPoint","sCampaignPointData","sCampaignPointReward","sCampaignPointsSearchQuery","isPartial","S","object","id","additionalProperties","extend","sClientEntity","prop","sStringId","sBCAddress","number","array","items","required","sBigInt","minItems","maxItems","description","sPageSearchQuery","CampaignPointRoutes","CAMPAIGN_POINTS_ROUTES_KEY"],"mappings":";;;;;;;;;;;IAiFaA,qBAAqB;eAArBA;;IAaAC,0BAA0B;eAA1BA;;;;;IA3EGC,cAAc;eAAdA;;IAiBAC,kBAAkB;eAAlBA;;IAsBAC,oBAAoB;eAApBA;;IA6CAC,0BAA0B;eAA1BA;;;;2EAvGF;sBAWP;qCACoC;AAOpC,SAASH,eAAeI,SAAmB;IAChD,OAAOC,yBAAC,CAACC,MAAM,GACZC,EAAE,CAAC,kBACHC,oBAAoB,CAAC,OACrBC,MAAM,CAACC,IAAAA,mBAAa,EAACN,YACrBK,MAAM,CAACR,mBAAmBG;AAC/B;AAWO,SAASH,mBAAmBG,SAAmB;IACpD,OAAOC,yBAAC,CAACC,MAAM,GACZE,oBAAoB,CAAC,OACrBG,IAAI,CAAC,YAAYC,IAAAA,eAAS,KAC1BD,IAAI,CAAC,iBAAiBE,IAAAA,gBAAU,KAChCF,IAAI,CAAC,cAAcC,IAAAA,eAAS,KAC5BD,IAAI,CAAC,UAAUN,yBAAC,CAACS,MAAM,IACvBH,IAAI,CAAC,UAAUN,yBAAC,CAACS,MAAM,IACvBH,IAAI,CAAC,WAAWN,yBAAC,CAACU,KAAK,GAAGC,KAAK,CAACd,yBAChCe,QAAQ,CACPb,YACI,EAAE,GACF;QAAC;QAAY;QAAiB;QAAc;QAAU;KAAS;AAEzE;AAQO,SAASF;IACd,OAAOG,yBAAC,CAACC,MAAM,GACZE,oBAAoB,CAAC,OACrBG,IAAI,CAAC,OAAOO,IAAAA,aAAO,KACnBD,QAAQ,GACRN,IAAI,CAAC,WAAWC,IAAAA,eAAS,KACzBD,IAAI,CAAC,UAAUO,IAAAA,aAAO;AAC3B;AAgBO,MAAMpB,wBAAwB;IACnC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAEM,MAAMC,6BAA6B;IAAC;IAAO;CAAS;AASpD,SAASI;IACd,OAAOE,yBAAC,CAACC,MAAM,GACZE,oBAAoB,CAAC,OACrBG,IAAI,CAAC,YAAYN,yBAAC,CAACU,KAAK,GAAGI,QAAQ,CAAC,GAAGC,QAAQ,CAAC,KAAKJ,KAAK,CAACJ,IAAAA,eAAS,MACpES,WAAW,CAAC,0BACZV,IAAI,CACH,iBACAN,yBAAC,CAACU,KAAK,GAAGI,QAAQ,CAAC,GAAGC,QAAQ,CAAC,KAAKJ,KAAK,CAACH,IAAAA,gBAAU,MAErDQ,WAAW,CAAC,iCACZV,IAAI,CAAC,cAAcN,yBAAC,CAACU,KAAK,GAAGI,QAAQ,CAAC,GAAGC,QAAQ,CAAC,KAAKJ,KAAK,CAACJ,IAAAA,eAAS,MACtES,WAAW,CAAC,4BACZZ,MAAM,CAACa,IAAAA,sBAAgB,EAACxB,uBAAuBC;AACpD;;UAWYwB;0DACC,CAAC,GAAG,EAAEC,+CAA0B,CAAC,CAAC;GADnCD,wBAAAA"}