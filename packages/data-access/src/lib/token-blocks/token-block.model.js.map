{"version":3,"sources":["../../../../../../../libs/shared/data-access/src/lib/token-blocks/token-block.model.ts"],"sourcesContent":["import S from 'fluent-json-schema'\nimport {\n  Block,\n  ClientEntity,\n  PageSearchQuery,\n  iBigInt,\n  sBCAddress,\n  sBigInt,\n  sBlock,\n  sClientEntity,\n  sPageSearchQuery,\n  sStringId,\n} from '../core'\nimport { TOKEN_BLOCKS_ROUTES_KEY } from './token-block.const'\n\n/**\n * Client Token interface\n */\nexport interface TokenBlock extends TokenBlockData, ClientEntity {}\n\nexport function sTokenBlock(isPartial?: boolean) {\n  return S.object()\n    .id('#tokenBlock')\n    .additionalProperties(false)\n    .extend(sClientEntity(isPartial))\n    .extend(sTokenBlockData(isPartial))\n}\n\nexport interface TokenBlockData {\n  block: Block\n  tokenId: string\n  tokenAddress: string\n  price: iBigInt\n}\n\nexport function sTokenBlockData(isPartial?: boolean) {\n  return S.object()\n    .additionalProperties(false)\n    .prop('block', sBlock())\n    .prop('tokenId', sStringId())\n    .description('The IDentifier of token.')\n    .prop('tokenAddress', sBCAddress())\n    .description('The blockchain address of the token.')\n    .prop('price', sBigInt())\n    .description('The token price.')\n    .required(isPartial ? [] : ['block', 'tokenId', 'tokenAddress', 'price'])\n}\n\nexport type TokenBlockFields =\n  | '_id'\n  | 'block'\n  | 'tokenId'\n  | 'tokenAddress'\n  | 'price'\n  | 'createdAt'\n  | 'createdBy'\n  | 'updatedAt'\n  | 'updatedBy'\n\nexport const TOKEN_BLOCK_FIELDS = [\n  '_id',\n  'block',\n  'tokenId',\n  'tokenAddress',\n  'price',\n  'createdAt',\n  'createdBy',\n  'updatedAt',\n  'updatedBy',\n]\n\nexport const TOKEN_BLOCK_SORT_FIELDS = ['block', 'timestamp']\n\nexport interface TokenBlockSearchQuery\n  extends PageSearchQuery<'block' | 'timestamp', TokenBlockFields> {\n  tokenId?: string\n  block?: string | string[]\n  tokenAddress?: string\n  'timestamp:gte'?: number\n  'timestamp:lte'?: number\n}\n\nexport function sTokenBlocksSearchQuery() {\n  return S.object()\n    .additionalProperties(false)\n    .prop('tokenId', sStringId())\n    .description('Token IDentifier to search.')\n    .prop('tokenAddress', sBCAddress())\n    .description('Token blockchain address to search.')\n    .prop('block', S.array().minItems(1).maxItems(200).items(S.number()))\n    .description('Block number of the token block.')\n    .prop('timestamp:gte', S.number())\n    .description('Start timestamp of the token block.')\n    .prop('timestamp:lte', S.number())\n    .description('End timestamp of the token block.')\n    .extend(sPageSearchQuery(TOKEN_BLOCK_FIELDS, TOKEN_BLOCK_SORT_FIELDS))\n}\n\nexport enum TokenBlockRoutes {\n  v1Create = `v1/${TOKEN_BLOCKS_ROUTES_KEY}`,\n  v1Delete = `v1/${TOKEN_BLOCKS_ROUTES_KEY}/:tokenBlockId`,\n  v1Read = `v1/${TOKEN_BLOCKS_ROUTES_KEY}/:tokenBlockId`,\n  v1Update = `v1/${TOKEN_BLOCKS_ROUTES_KEY}/:tokenBlockId`,\n  v1Search = `v1/${TOKEN_BLOCKS_ROUTES_KEY}`,\n}\n"],"names":["TOKEN_BLOCK_FIELDS","TOKEN_BLOCK_SORT_FIELDS","sTokenBlock","sTokenBlockData","sTokenBlocksSearchQuery","isPartial","S","object","id","additionalProperties","extend","sClientEntity","prop","sBlock","sStringId","description","sBCAddress","sBigInt","required","array","minItems","maxItems","items","number","sPageSearchQuery","TokenBlockRoutes","TOKEN_BLOCKS_ROUTES_KEY"],"mappings":";;;;;;;;;;;IA2DaA,kBAAkB;eAAlBA;;IAYAC,uBAAuB;eAAvBA;;;;;IAnDGC,WAAW;eAAXA;;IAeAC,eAAe;eAAfA;;IA+CAC,uBAAuB;eAAvBA;;;;2EAlFF;sBAYP;iCACiC;AAOjC,SAASF,YAAYG,SAAmB;IAC7C,OAAOC,yBAAC,CAACC,MAAM,GACZC,EAAE,CAAC,eACHC,oBAAoB,CAAC,OACrBC,MAAM,CAACC,IAAAA,mBAAa,EAACN,YACrBK,MAAM,CAACP,gBAAgBE;AAC5B;AASO,SAASF,gBAAgBE,SAAmB;IACjD,OAAOC,yBAAC,CAACC,MAAM,GACZE,oBAAoB,CAAC,OACrBG,IAAI,CAAC,SAASC,IAAAA,YAAM,KACpBD,IAAI,CAAC,WAAWE,IAAAA,eAAS,KACzBC,WAAW,CAAC,4BACZH,IAAI,CAAC,gBAAgBI,IAAAA,gBAAU,KAC/BD,WAAW,CAAC,wCACZH,IAAI,CAAC,SAASK,IAAAA,aAAO,KACrBF,WAAW,CAAC,oBACZG,QAAQ,CAACb,YAAY,EAAE,GAAG;QAAC;QAAS;QAAW;QAAgB;KAAQ;AAC5E;AAaO,MAAML,qBAAqB;IAChC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAEM,MAAMC,0BAA0B;IAAC;IAAS;CAAY;AAWtD,SAASG;IACd,OAAOE,yBAAC,CAACC,MAAM,GACZE,oBAAoB,CAAC,OACrBG,IAAI,CAAC,WAAWE,IAAAA,eAAS,KACzBC,WAAW,CAAC,+BACZH,IAAI,CAAC,gBAAgBI,IAAAA,gBAAU,KAC/BD,WAAW,CAAC,uCACZH,IAAI,CAAC,SAASN,yBAAC,CAACa,KAAK,GAAGC,QAAQ,CAAC,GAAGC,QAAQ,CAAC,KAAKC,KAAK,CAAChB,yBAAC,CAACiB,MAAM,KAChER,WAAW,CAAC,oCACZH,IAAI,CAAC,iBAAiBN,yBAAC,CAACiB,MAAM,IAC9BR,WAAW,CAAC,uCACZH,IAAI,CAAC,iBAAiBN,yBAAC,CAACiB,MAAM,IAC9BR,WAAW,CAAC,qCACZL,MAAM,CAACc,IAAAA,sBAAgB,EAACxB,oBAAoBC;AACjD;;UAEYwB;oDACC,CAAC,GAAG,EAAEC,wCAAuB,CAAC,CAAC;oDAC/B,CAAC,GAAG,EAAEA,wCAAuB,CAAC,cAAc,CAAC;kDAC/C,CAAC,GAAG,EAAEA,wCAAuB,CAAC,cAAc,CAAC;oDAC3C,CAAC,GAAG,EAAEA,wCAAuB,CAAC,cAAc,CAAC;oDAC7C,CAAC,GAAG,EAAEA,wCAAuB,CAAC,CAAC;GALhCD,qBAAAA"}