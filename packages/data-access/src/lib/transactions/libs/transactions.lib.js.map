{"version":3,"sources":["../../../../../../../../libs/shared/data-access/src/lib/transactions/libs/transactions.lib.ts"],"sourcesContent":["import { Bytes, HexString, Transaction } from 'web3'\nimport { decodeAbiParameters } from '../../core'\n\n/**\n * Extract method signature from transaction input field\n * @param transaction web3 transaction\n * @returns transaction method signature\n */\nexport function getTransactionMethodSignature(\n  transaction: Transaction\n): Bytes | undefined {\n  const inputString = getTransactionInputData(transaction)\n  return String(inputString?.slice(0, 10))\n}\n\n/**\n * Extract input string from transaction considering SAFE\n * @param transaction web3 transaction\n * @returns transaction input hex string\n */\nexport function getTransactionInputString(\n  transaction: Transaction\n): HexString | undefined {\n  const inputString = getTransactionInputData(transaction)\n  return String(inputString?.slice(10))\n}\n\n/**\n * Check whether the transaction is from SAFE\n * @param transaction web3 transaction\n * @returns true | false\n */\nexport function isSafeTransaction(transaction: Transaction): boolean {\n  return transaction.input?.slice(0, 10) === '0x6a761202'\n}\n\n/**\n * Decode SAFE transaction input and get data\n * @param transaction web3 transaction\n * @returns SAFE transaction input hex string\n */\nexport function getTransactionInputData(\n  transaction: Transaction\n): HexString | undefined {\n  const isSafe = isSafeTransaction(transaction)\n  if (!isSafe) {\n    return String(transaction.input)\n  }\n  const hexString = transaction.input?.slice(10) as HexString\n  if (!hexString) {\n    return\n  }\n  const inputParams = decodeAbiParameters(\n    [\n      'address',\n      'uint256',\n      'bytes',\n      'uint8',\n      'uint256',\n      'uint256',\n      'uint256',\n      'address',\n      'address',\n      'bytes',\n    ],\n    hexString\n  )\n\n  return String(inputParams[2])\n}\n"],"names":["getTransactionInputData","getTransactionInputString","getTransactionMethodSignature","isSafeTransaction","transaction","inputString","String","slice","input","isSafe","hexString","inputParams","decodeAbiParameters"],"mappings":";;;;;;;;;;;IAyCgBA,uBAAuB;eAAvBA;;IArBAC,yBAAyB;eAAzBA;;IAZAC,6BAA6B;eAA7BA;;IAwBAC,iBAAiB;eAAjBA;;;sBA/BoB;AAO7B,SAASD,8BACdE,WAAwB;IAExB,MAAMC,cAAcL,wBAAwBI;IAC5C,OAAOE,OAAOD,+BAAAA,YAAaE,KAAK,CAAC,GAAG;AACtC;AAOO,SAASN,0BACdG,WAAwB;IAExB,MAAMC,cAAcL,wBAAwBI;IAC5C,OAAOE,OAAOD,+BAAAA,YAAaE,KAAK,CAAC;AACnC;AAOO,SAASJ,kBAAkBC,WAAwB;QACjDA;IAAP,OAAOA,EAAAA,qBAAAA,YAAYI,KAAK,qBAAjBJ,mBAAmBG,KAAK,CAAC,GAAG,SAAQ;AAC7C;AAOO,SAASP,wBACdI,WAAwB;QAMNA;IAJlB,MAAMK,SAASN,kBAAkBC;IACjC,IAAI,CAACK,QAAQ;QACX,OAAOH,OAAOF,YAAYI,KAAK;IACjC;IACA,MAAME,aAAYN,qBAAAA,YAAYI,KAAK,qBAAjBJ,mBAAmBG,KAAK,CAAC;IAC3C,IAAI,CAACG,WAAW;QACd;IACF;IACA,MAAMC,cAAcC,IAAAA,yBAAmB,EACrC;QACE;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD,EACDF;IAGF,OAAOJ,OAAOK,WAAW,CAAC,EAAE;AAC9B"}