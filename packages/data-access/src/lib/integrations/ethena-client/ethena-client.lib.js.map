{"version":3,"sources":["../../../../../../../../libs/shared/data-access/src/lib/integrations/ethena-client/ethena-client.lib.ts"],"sourcesContent":["import axios, { Axios, CreateAxiosDefaults } from 'axios'\nimport { BNify } from '../../core'\nimport { IntegrationClientModel } from '../integration-client.model'\n\nexport class EthenaClient implements IntegrationClientModel {\n  // Axios instance\n  private axios: Axios\n\n  constructor() {\n    this.axios = this.initAxios()\n  }\n\n  /**\n   * Axios initialization\n   */\n  private initAxios() {\n    const options: CreateAxiosDefaults = {\n      baseURL: 'https://app.ethena.fi/api/',\n      headers: {\n        'content-type': 'application/json',\n      },\n    }\n    return axios.create(options)\n  }\n\n  // Methods\n\n  public async getApr(tokenSymbol: string): Promise<number> {\n    switch (tokenSymbol) {\n      case 'USDe':\n        return this.getUSDeApr()\n      default:\n        return 0\n    }\n  }\n\n  public async getUSDeApr(): Promise<number> {\n    return this.axios\n      .request({\n        url: 'yields/protocol-and-staking-yield',\n        method: 'GET',\n        responseType: 'json',\n      })\n      .then((response) => BNify(response?.data.stakingYield.value).toNumber())\n      .catch(() => 0)\n  }\n}\n"],"names":["EthenaClient","initAxios","options","baseURL","headers","axios","create","getApr","tokenSymbol","getUSDeApr","request","url","method","responseType","then","response","BNify","data","stakingYield","value","toNumber","catch","constructor"],"mappings":";;;;+BAIaA;;;eAAAA;;;;gEAJqC;sBAC5B;AAGf,IAAA,AAAMA,eAAN,MAAMA;IAQX;;GAEC,GACD,AAAQC,YAAY;QAClB,MAAMC,UAA+B;YACnCC,SAAS;YACTC,SAAS;gBACP,gBAAgB;YAClB;QACF;QACA,OAAOC,cAAK,CAACC,MAAM,CAACJ;IACtB;IAEA,UAAU;IAEV,MAAaK,OAAOC,WAAmB,EAAmB;QACxD,OAAQA;YACN,KAAK;gBACH,OAAO,IAAI,CAACC,UAAU;YACxB;gBACE,OAAO;QACX;IACF;IAEA,MAAaA,aAA8B;QACzC,OAAO,IAAI,CAACJ,KAAK,CACdK,OAAO,CAAC;YACPC,KAAK;YACLC,QAAQ;YACRC,cAAc;QAChB,GACCC,IAAI,CAAC,CAACC,WAAaC,IAAAA,WAAK,EAACD,4BAAAA,SAAUE,IAAI,CAACC,YAAY,CAACC,KAAK,EAAEC,QAAQ,IACpEC,KAAK,CAAC,IAAM;IACjB;IArCAC,aAAc;QACZ,IAAI,CAACjB,KAAK,GAAG,IAAI,CAACJ,SAAS;IAC7B;AAoCF"}