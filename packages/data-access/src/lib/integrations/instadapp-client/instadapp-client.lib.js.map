{"version":3,"sources":["../../../../../../../../libs/shared/data-access/src/lib/integrations/instadapp-client/instadapp-client.lib.ts"],"sourcesContent":["import axios, { Axios, CreateAxiosDefaults } from 'axios'\nimport { BNify } from '../../core'\nimport { IntegrationClientModel } from '../integration-client.model'\n\nexport class InstadappClient implements IntegrationClientModel {\n  // Axios instance\n  private axios: Axios\n\n  constructor() {\n    this.axios = this.initAxios()\n  }\n\n  /**\n   * Axios initialization\n   */\n  private initAxios() {\n    const options: CreateAxiosDefaults = {\n      baseURL: 'https://api.instadapp.io/v2/mainnet/lite/users/',\n      headers: {\n        'content-type': 'application/json',\n      },\n    }\n    return axios.create(options)\n  }\n\n  // Methods\n\n  public async getApr(tokenSymbol: string): Promise<number> {\n    switch (tokenSymbol) {\n      case 'stETH':\n        return this.getStETHApr()\n      default:\n        return 0\n    }\n  }\n\n  public async getStETHApr(): Promise<number> {\n    return this.axios\n      .request({\n        url: '0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE/vaults',\n        method: 'GET',\n        responseType: 'json',\n      })\n      .then((response) => {\n        if (!response?.data) {\n          return 0\n        }\n\n        const foundVault = response.data.find(\n          (r: any) => r.vault === '0xA0D3707c569ff8C87FA923d3823eC5D81c98Be78'\n        )\n        return BNify(foundVault?.apy.apyWithoutFee).toNumber()\n      })\n      .catch(() => 0)\n  }\n}\n"],"names":["axios","BNify","InstadappClient","initAxios","options","baseURL","headers","create","getApr","tokenSymbol","getStETHApr","request","url","method","responseType","then","response","data","foundVault","find","r","vault","apy","apyWithoutFee","toNumber","catch","constructor"],"mappings":"AAAA,OAAOA,WAA2C,QAAO;AACzD,SAASC,KAAK,QAAQ,aAAY;AAGlC,OAAO,MAAMC;IAQX;;GAEC,GACD,AAAQC,YAAY;QAClB,MAAMC,UAA+B;YACnCC,SAAS;YACTC,SAAS;gBACP,gBAAgB;YAClB;QACF;QACA,OAAON,MAAMO,MAAM,CAACH;IACtB;IAEA,UAAU;IAEV,MAAaI,OAAOC,WAAmB,EAAmB;QACxD,OAAQA;YACN,KAAK;gBACH,OAAO,IAAI,CAACC,WAAW;YACzB;gBACE,OAAO;QACX;IACF;IAEA,MAAaA,cAA+B;QAC1C,OAAO,IAAI,CAACV,KAAK,CACdW,OAAO,CAAC;YACPC,KAAK;YACLC,QAAQ;YACRC,cAAc;QAChB,GACCC,IAAI,CAAC,CAACC;YACL,IAAI,EAACA,4BAAAA,SAAUC,IAAI,GAAE;gBACnB,OAAO;YACT;YAEA,MAAMC,aAAaF,SAASC,IAAI,CAACE,IAAI,CACnC,CAACC,IAAWA,EAAEC,KAAK,KAAK;YAE1B,OAAOpB,MAAMiB,8BAAAA,WAAYI,GAAG,CAACC,aAAa,EAAEC,QAAQ;QACtD,GACCC,KAAK,CAAC,IAAM;IACjB;IA9CAC,aAAc;QACZ,IAAI,CAAC1B,KAAK,GAAG,IAAI,CAACG,SAAS;IAC7B;AA6CF"}