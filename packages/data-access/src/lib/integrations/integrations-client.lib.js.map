{"version":3,"sources":["../../../../../../../libs/shared/data-access/src/lib/integrations/integrations-client.lib.ts"],"sourcesContent":["import { TermFinanceHolder, VaultIntegrationProvider } from '../vaults'\nimport { EthenaClient } from './ethena-client/ethena-client.lib'\nimport { InstadappClient } from './instadapp-client/instadapp-client.lib'\nimport {\n  IntegrationClientModel,\n  IntegrationRepoTokensParams,\n} from './integration-client.model'\nimport { LidoClient } from './lido-client/lido-client'\nimport { UsualClient } from './usual-client/usual-client.lib'\nimport { TermFinanceClient } from './term-finance-client/term-finance-client.lib'\n\nexport class IntegrationClient implements IntegrationClientModel {\n  private client: IntegrationClientModel\n\n  public constructor(provider: VaultIntegrationProvider) {\n    switch (provider) {\n      case 'Usual':\n        this.client = new UsualClient()\n        break\n      case 'Lido':\n        this.client = new LidoClient()\n        break\n      case 'Instadapp':\n        this.client = new InstadappClient()\n        break\n      case 'Ethena':\n        this.client = new EthenaClient()\n        break\n      case 'TermFinance':\n        this.client = new TermFinanceClient()\n        break\n      default:\n        throw Error(`Integration Error: wrong provider \"${provider}\"`)\n    }\n  }\n\n  public async getApr(tokenSymbol: string): Promise<number> {\n    return this.client.getApr ? this.client.getApr(tokenSymbol) : 0\n  }\n\n  public async getRepoTokensHolders(\n    params: IntegrationRepoTokensParams\n  ): Promise<TermFinanceHolder[]> {\n    return this.client.getRepoTokensHolders\n      ? this.client.getRepoTokensHolders(params)\n      : []\n  }\n}\n"],"names":["IntegrationClient","getApr","tokenSymbol","client","getRepoTokensHolders","params","provider","UsualClient","LidoClient","InstadappClient","EthenaClient","TermFinanceClient","Error"],"mappings":";;;;+BAWaA;;;eAAAA;;;iCAVgB;oCACG;4BAKL;gCACC;sCACM;AAE3B,IAAA,AAAMA,oBAAN,MAAMA;IAyBX,MAAaC,OAAOC,WAAmB,EAAmB;QACxD,OAAO,IAAI,CAACC,MAAM,CAACF,MAAM,GAAG,IAAI,CAACE,MAAM,CAACF,MAAM,CAACC,eAAe;IAChE;IAEA,MAAaE,qBACXC,MAAmC,EACL;QAC9B,OAAO,IAAI,CAACF,MAAM,CAACC,oBAAoB,GACnC,IAAI,CAACD,MAAM,CAACC,oBAAoB,CAACC,UACjC,EAAE;IACR;IAhCA,YAAmBC,QAAkC,CAAE;QACrD,OAAQA;YACN,KAAK;gBACH,IAAI,CAACH,MAAM,GAAG,IAAII,2BAAW;gBAC7B;YACF,KAAK;gBACH,IAAI,CAACJ,MAAM,GAAG,IAAIK,sBAAU;gBAC5B;YACF,KAAK;gBACH,IAAI,CAACL,MAAM,GAAG,IAAIM,mCAAe;gBACjC;YACF,KAAK;gBACH,IAAI,CAACN,MAAM,GAAG,IAAIO,6BAAY;gBAC9B;YACF,KAAK;gBACH,IAAI,CAACP,MAAM,GAAG,IAAIQ,uCAAiB;gBACnC;YACF;gBACE,MAAMC,MAAM,CAAC,mCAAmC,EAAEN,SAAS,CAAC,CAAC;QACjE;IACF;AAaF"}