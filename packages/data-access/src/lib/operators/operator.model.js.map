{"version":3,"sources":["../../../../../../../libs/shared/data-access/src/lib/operators/operator.model.ts"],"sourcesContent":["import S from 'fluent-json-schema'\nimport {\n  ClientEntity,\n  Locales,\n  Page,\n  PageSearchQuery,\n  sClientEntity,\n  sLocales,\n  sPageSearchQuery,\n} from '../core'\nimport { OPERATORS_ROUTES_KEY } from './operator.const'\n\n/**\n * Client Chain interface\n */\nexport interface Operator extends OperatorData, ClientEntity {}\n\nexport function sOperator(isPartial?: boolean) {\n  return S.object()\n    .id('#operator')\n    .additionalProperties(false)\n    .extend(sClientEntity(isPartial))\n    .extend(sOperatorData(isPartial))\n}\n\nexport interface OperatorData {\n  name: string\n  code: string\n  type: OperatorType\n  description?: Locales<string>\n  shortDescription?: Locales<string>\n  caption?: Locales<string>\n  rating?: string\n  location?: string\n  color?: string\n  links?: OperatorLinks\n}\n\nexport function sOperatorData(isPartial?: boolean) {\n  return S.object()\n    .additionalProperties(false)\n    .prop('name', S.string())\n    .description('The name of the operator.')\n    .prop('code', S.string())\n    .description('The unique code of the operator.')\n    .prop('type', sOperatorType())\n    .description('The operator type.')\n    .prop('description', sLocales())\n    .description('The operator description')\n    .prop('shortDescription', sLocales())\n    .description('The operator short description')\n    .prop('caption', sLocales())\n    .description('A short label about the operator')\n    .prop('rating', S.string())\n    .description('The operator rating')\n    .prop('location', S.string())\n    .description('The operator location')\n    .prop('color', S.string())\n    .description('The operator main color')\n    .prop('links', sOperatorLinks())\n    .description('Links about operator')\n    .required(isPartial ? [] : ['name', 'code', 'type'])\n}\n\nexport interface OperatorLinks {\n  website?: string\n  twitter?: string\n  linkedIn?: string\n  crunchbase?: string\n}\n\nexport function sOperatorLinks() {\n  return S.object()\n    .additionalProperties(false)\n    .prop('website', S.string())\n    .prop('twitter', S.string())\n    .prop('linkedIn', S.string())\n    .prop('crunchbase', S.string())\n}\n\nexport type OperatorType = 'PROTOCOL' | 'BORROWER' | 'CURATOR'\n\nexport function sOperatorType() {\n  return S.string().enum(['PROTOCOL', 'BORROWER', 'CURATOR'])\n}\n\nexport enum OperatorErrorCodes {\n  notFound = 'OPERATOR_NOT_FOUND',\n  notDeletable = 'OPERATOR_NOT_DELETABLE',\n}\n\nexport type OperatorFields =\n  | '_id'\n  | 'name'\n  | 'code'\n  | 'type'\n  | 'description'\n  | 'label'\n  | 'rating'\n  | 'location'\n  | 'links'\n  | 'createdAt'\n  | 'createdBy'\n  | 'updatedAt'\n  | 'updatedBy'\n\nexport const OPERATOR_FIELDS = [\n  '_id',\n  'name',\n  'code',\n  'type',\n  'description',\n  'label',\n  'rating',\n  'location',\n  'links',\n  'createdAt',\n  'createdBy',\n  'updatedAt',\n  'updatedBy',\n]\n\nexport const OPERATOR_SORT_FIELDS = ['_id', 'name']\n\nexport interface OperatorsSearchQuery\n  extends PageSearchQuery<'name', OperatorFields> {\n  name?: string\n  'name:ct'?: string\n  code?: string\n}\n\nexport function sOperatorsSearchQuery() {\n  return S.object()\n    .additionalProperties(false)\n    .prop('name', S.string())\n    .description('Name of the operator that must match.')\n    .prop('name:ct', S.string())\n    .description('Name of the operator that must be contained.')\n    .prop('code', S.string())\n    .description('Code of the operator that must match.')\n    .extend(sPageSearchQuery(OPERATOR_FIELDS, OPERATOR_SORT_FIELDS))\n}\n\nexport interface OperatorsClient {\n  search: (params?: OperatorsSearchQuery) => Promise<Page<Operator>>\n  list: (params?: OperatorsSearchQuery) => Promise<Operator[]>\n  findOne: (params?: OperatorsSearchQuery) => Promise<Operator | undefined>\n}\n\nexport enum OperatorRoutes {\n  v1Create = `v1/${OPERATORS_ROUTES_KEY}`,\n  v1Delete = `v1/${OPERATORS_ROUTES_KEY}/:operatorId`,\n  v1Read = `v1/${OPERATORS_ROUTES_KEY}/:operatorId`,\n  v1Update = `v1/${OPERATORS_ROUTES_KEY}/:operatorId`,\n  v1Search = `v1/${OPERATORS_ROUTES_KEY}`,\n}\n"],"names":["S","sClientEntity","sLocales","sPageSearchQuery","OPERATORS_ROUTES_KEY","sOperator","isPartial","object","id","additionalProperties","extend","sOperatorData","prop","string","description","sOperatorType","sOperatorLinks","required","enum","OperatorErrorCodes","OPERATOR_FIELDS","OPERATOR_SORT_FIELDS","sOperatorsSearchQuery","OperatorRoutes"],"mappings":"AAAA,OAAOA,OAAO,qBAAoB;AAClC,SAKEC,aAAa,EACbC,QAAQ,EACRC,gBAAgB,QACX,UAAS;AAChB,SAASC,oBAAoB,QAAQ,mBAAkB;AAOvD,OAAO,SAASC,UAAUC,SAAmB;IAC3C,OAAON,EAAEO,MAAM,GACZC,EAAE,CAAC,aACHC,oBAAoB,CAAC,OACrBC,MAAM,CAACT,cAAcK,YACrBI,MAAM,CAACC,cAAcL;AAC1B;AAeA,OAAO,SAASK,cAAcL,SAAmB;IAC/C,OAAON,EAAEO,MAAM,GACZE,oBAAoB,CAAC,OACrBG,IAAI,CAAC,QAAQZ,EAAEa,MAAM,IACrBC,WAAW,CAAC,6BACZF,IAAI,CAAC,QAAQZ,EAAEa,MAAM,IACrBC,WAAW,CAAC,oCACZF,IAAI,CAAC,QAAQG,iBACbD,WAAW,CAAC,sBACZF,IAAI,CAAC,eAAeV,YACpBY,WAAW,CAAC,4BACZF,IAAI,CAAC,oBAAoBV,YACzBY,WAAW,CAAC,kCACZF,IAAI,CAAC,WAAWV,YAChBY,WAAW,CAAC,oCACZF,IAAI,CAAC,UAAUZ,EAAEa,MAAM,IACvBC,WAAW,CAAC,uBACZF,IAAI,CAAC,YAAYZ,EAAEa,MAAM,IACzBC,WAAW,CAAC,yBACZF,IAAI,CAAC,SAASZ,EAAEa,MAAM,IACtBC,WAAW,CAAC,2BACZF,IAAI,CAAC,SAASI,kBACdF,WAAW,CAAC,wBACZG,QAAQ,CAACX,YAAY,EAAE,GAAG;QAAC;QAAQ;QAAQ;KAAO;AACvD;AASA,OAAO,SAASU;IACd,OAAOhB,EAAEO,MAAM,GACZE,oBAAoB,CAAC,OACrBG,IAAI,CAAC,WAAWZ,EAAEa,MAAM,IACxBD,IAAI,CAAC,WAAWZ,EAAEa,MAAM,IACxBD,IAAI,CAAC,YAAYZ,EAAEa,MAAM,IACzBD,IAAI,CAAC,cAAcZ,EAAEa,MAAM;AAChC;AAIA,OAAO,SAASE;IACd,OAAOf,EAAEa,MAAM,GAAGK,IAAI,CAAC;QAAC;QAAY;QAAY;KAAU;AAC5D;;UAEYC;;;GAAAA,uBAAAA;AAoBZ,OAAO,MAAMC,kBAAkB;IAC7B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD,CAAA;AAED,OAAO,MAAMC,uBAAuB;IAAC;IAAO;CAAO,CAAA;AASnD,OAAO,SAASC;IACd,OAAOtB,EAAEO,MAAM,GACZE,oBAAoB,CAAC,OACrBG,IAAI,CAAC,QAAQZ,EAAEa,MAAM,IACrBC,WAAW,CAAC,yCACZF,IAAI,CAAC,WAAWZ,EAAEa,MAAM,IACxBC,WAAW,CAAC,gDACZF,IAAI,CAAC,QAAQZ,EAAEa,MAAM,IACrBC,WAAW,CAAC,yCACZJ,MAAM,CAACP,iBAAiBiB,iBAAiBC;AAC9C;;UAQYE;gDACC,CAAC,GAAG,EAAEnB,qBAAqB,CAAC;gDAC5B,CAAC,GAAG,EAAEA,qBAAqB,YAAY,CAAC;8CAC1C,CAAC,GAAG,EAAEA,qBAAqB,YAAY,CAAC;gDACtC,CAAC,GAAG,EAAEA,qBAAqB,YAAY,CAAC;gDACxC,CAAC,GAAG,EAAEA,qBAAqB,CAAC;GAL7BmB,mBAAAA"}