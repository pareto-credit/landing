{"version":3,"sources":["../../../../../../../../libs/shared/data-access/src/lib/vaults/libs/vault-cdo-epoch.lib.ts"],"sourcesContent":["import { VaultBlock } from '../../vault-blocks'\nimport { Vault } from '../vault.model'\n\n/**\n * Get vault cdoEpoch spender\n * @param vault vault object\n * @param block vault block object\n * @param kind the pender kind\n * @returns the spender address\n */\nexport function getVaultCdoEpochSpender(\n  vault: Vault,\n  block: VaultBlock,\n  kind: 'DEPOSIT' | 'WITHDRAW'\n) {\n  switch (kind) {\n    case 'DEPOSIT':\n      return getDepositSpender(vault, block)\n    case 'WITHDRAW':\n      return getWithdrawSpender(vault, block)\n  }\n}\n\nfunction getDepositSpender(vault: Vault, block: VaultBlock) {\n  const isQueueEnabled = !!vault.cdoEpoch?.depositQueue?.address\n  const isEpochRunning = block.cdoEpoch?.status === 'RUNNING'\n\n  return isQueueEnabled && isEpochRunning\n    ? vault.cdoEpoch?.depositQueue?.address\n    : vault.cdoEpoch?.address\n}\n\nfunction getWithdrawSpender(vault: Vault, block: VaultBlock) {\n  const isQueueEnabled = !!vault.cdoEpoch?.withdrawQueue?.address\n  const isEpochRunning = block.cdoEpoch?.status === 'RUNNING'\n\n  return isQueueEnabled && isEpochRunning\n    ? vault.cdoEpoch?.withdrawQueue?.address\n    : undefined\n}\n"],"names":["getVaultCdoEpochSpender","vault","block","kind","getDepositSpender","getWithdrawSpender","isQueueEnabled","cdoEpoch","depositQueue","address","isEpochRunning","status","withdrawQueue","undefined"],"mappings":"AAGA;;;;;;CAMC,GACD,OAAO,SAASA,wBACdC,KAAY,EACZC,KAAiB,EACjBC,IAA4B;IAE5B,OAAQA;QACN,KAAK;YACH,OAAOC,kBAAkBH,OAAOC;QAClC,KAAK;YACH,OAAOG,mBAAmBJ,OAAOC;IACrC;AACF;AAEA,SAASE,kBAAkBH,KAAY,EAAEC,KAAiB;QAC/BD,8BAAAA,iBACFC,iBAGnBD,+BAAAA,kBACAA;IALJ,MAAMK,iBAAiB,CAAC,GAACL,kBAAAA,MAAMM,QAAQ,sBAAdN,+BAAAA,gBAAgBO,YAAY,qBAA5BP,6BAA8BQ,OAAO;IAC9D,MAAMC,iBAAiBR,EAAAA,kBAAAA,MAAMK,QAAQ,qBAAdL,gBAAgBS,MAAM,MAAK;IAElD,OAAOL,kBAAkBI,kBACrBT,mBAAAA,MAAMM,QAAQ,sBAAdN,gCAAAA,iBAAgBO,YAAY,qBAA5BP,8BAA8BQ,OAAO,IACrCR,mBAAAA,MAAMM,QAAQ,qBAAdN,iBAAgBQ,OAAO;AAC7B;AAEA,SAASJ,mBAAmBJ,KAAY,EAAEC,KAAiB;QAChCD,+BAAAA,iBACFC,iBAGnBD,gCAAAA;IAJJ,MAAMK,iBAAiB,CAAC,GAACL,kBAAAA,MAAMM,QAAQ,sBAAdN,gCAAAA,gBAAgBW,aAAa,qBAA7BX,8BAA+BQ,OAAO;IAC/D,MAAMC,iBAAiBR,EAAAA,kBAAAA,MAAMK,QAAQ,qBAAdL,gBAAgBS,MAAM,MAAK;IAElD,OAAOL,kBAAkBI,kBACrBT,mBAAAA,MAAMM,QAAQ,sBAAdN,iCAAAA,iBAAgBW,aAAa,qBAA7BX,+BAA+BQ,OAAO,GACtCI;AACN"}