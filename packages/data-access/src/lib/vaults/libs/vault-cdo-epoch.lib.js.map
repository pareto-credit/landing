{"version":3,"sources":["../../../../../../../../libs/shared/data-access/src/lib/vaults/libs/vault-cdo-epoch.lib.ts"],"sourcesContent":["import { VaultBlock } from '../../vault-blocks'\nimport { Vault } from '../vault.model'\n\n/**\n * Get vault cdoEpoch spender\n * @param vault vault object\n * @param block vault block object\n * @param kind the pender kind\n * @returns the spender address\n */\nexport function getVaultCdoEpochSpender(\n  vault: Vault,\n  block: VaultBlock,\n  kind: 'DEPOSIT' | 'WITHDRAW' | 'EARLY_WITHDRAW'\n) {\n  switch (kind) {\n    case 'DEPOSIT':\n      return getDepositSpender(vault, block)\n    case 'WITHDRAW':\n      return getWithdrawSpender(vault, block)\n    case 'EARLY_WITHDRAW':\n      return getEarlyWithdrawSpender(vault)\n  }\n}\n\nfunction getDepositSpender(vault: Vault, block: VaultBlock) {\n  const isQueueEnabled = !!vault.cdoEpoch?.depositQueue?.address\n  const isEpochRunning = block.cdoEpoch?.status === 'RUNNING'\n\n  return isQueueEnabled && isEpochRunning\n    ? vault.cdoEpoch?.depositQueue?.address\n    : vault.cdoEpoch?.address\n}\n\nfunction getWithdrawSpender(vault: Vault, block: VaultBlock) {\n  const isQueueEnabled = !!vault.cdoEpoch?.withdrawQueue?.address\n  const isEpochRunning = block.cdoEpoch?.status === 'RUNNING'\n\n  return isQueueEnabled && isEpochRunning\n    ? vault.cdoEpoch?.withdrawQueue?.address\n    : undefined\n}\n\nfunction getEarlyWithdrawSpender(vault: Vault) {\n  const isEarlyWithdrawEnabled = !!vault.cdoEpoch?.writeOff?.address\n  return isEarlyWithdrawEnabled ? vault.cdoEpoch?.writeOff?.address : undefined\n}\n"],"names":["getVaultCdoEpochSpender","vault","block","kind","getDepositSpender","getWithdrawSpender","getEarlyWithdrawSpender","isQueueEnabled","cdoEpoch","depositQueue","address","isEpochRunning","status","withdrawQueue","undefined","isEarlyWithdrawEnabled","writeOff"],"mappings":";;;;+BAUgBA;;;eAAAA;;;AAAT,SAASA,wBACdC,KAAY,EACZC,KAAiB,EACjBC,IAA+C;IAE/C,OAAQA;QACN,KAAK;YACH,OAAOC,kBAAkBH,OAAOC;QAClC,KAAK;YACH,OAAOG,mBAAmBJ,OAAOC;QACnC,KAAK;YACH,OAAOI,wBAAwBL;IACnC;AACF;AAEA,SAASG,kBAAkBH,KAAY,EAAEC,KAAiB;QAC/BD,8BAAAA,iBACFC,iBAGnBD,+BAAAA,kBACAA;IALJ,MAAMM,iBAAiB,CAAC,GAACN,kBAAAA,MAAMO,QAAQ,sBAAdP,+BAAAA,gBAAgBQ,YAAY,qBAA5BR,6BAA8BS,OAAO;IAC9D,MAAMC,iBAAiBT,EAAAA,kBAAAA,MAAMM,QAAQ,qBAAdN,gBAAgBU,MAAM,MAAK;IAElD,OAAOL,kBAAkBI,kBACrBV,mBAAAA,MAAMO,QAAQ,sBAAdP,gCAAAA,iBAAgBQ,YAAY,qBAA5BR,8BAA8BS,OAAO,IACrCT,mBAAAA,MAAMO,QAAQ,qBAAdP,iBAAgBS,OAAO;AAC7B;AAEA,SAASL,mBAAmBJ,KAAY,EAAEC,KAAiB;QAChCD,+BAAAA,iBACFC,iBAGnBD,gCAAAA;IAJJ,MAAMM,iBAAiB,CAAC,GAACN,kBAAAA,MAAMO,QAAQ,sBAAdP,gCAAAA,gBAAgBY,aAAa,qBAA7BZ,8BAA+BS,OAAO;IAC/D,MAAMC,iBAAiBT,EAAAA,kBAAAA,MAAMM,QAAQ,qBAAdN,gBAAgBU,MAAM,MAAK;IAElD,OAAOL,kBAAkBI,kBACrBV,mBAAAA,MAAMO,QAAQ,sBAAdP,iCAAAA,iBAAgBY,aAAa,qBAA7BZ,+BAA+BS,OAAO,GACtCI;AACN;AAEA,SAASR,wBAAwBL,KAAY;QACVA,0BAAAA,iBACDA,2BAAAA;IADhC,MAAMc,yBAAyB,CAAC,GAACd,kBAAAA,MAAMO,QAAQ,sBAAdP,2BAAAA,gBAAgBe,QAAQ,qBAAxBf,yBAA0BS,OAAO;IAClE,OAAOK,0BAAyBd,mBAAAA,MAAMO,QAAQ,sBAAdP,4BAAAA,iBAAgBe,QAAQ,qBAAxBf,0BAA0BS,OAAO,GAAGI;AACtE"}