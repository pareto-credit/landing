{"version":3,"sources":["../../../../../../../libs/shared/data-access/src/lib/access-tokens/access-token.model.ts"],"sourcesContent":["import S from 'fluent-json-schema'\nimport { sDateString, sStringId } from '../core'\n\n/**\n * Client Chain interface\n */\nexport interface AccessToken extends AccessTokenData {\n  _id: string\n  /**\n   * Creation date\n   */\n  createdAt: string\n  /**\n   * Token expiration date\n   */\n  expiresOn?: string\n}\n\nexport function sAccessToken() {\n  return S.object()\n    .id('#accessToken')\n    .additionalProperties(false)\n    .prop('_id', sStringId())\n    .description('Access Token ID.')\n    .required()\n    .prop('createdAt', sDateString())\n    .description('Access Token creation date.')\n    .required()\n    .prop('createdBy', sStringId())\n    .description('The IDentifier of the creation subject.')\n    .required()\n    .extend(sAccessTokenData())\n}\n\nexport interface AccessTokenData {\n  /**\n   * Token JWT signature\n   */\n  signature: string\n  /**\n   * Permission level\n   */\n  permission: 'READ' | 'WRITE'\n  /**\n   * User assigned\n   */\n  userId?: string\n  /**\n   * Creation user Id\n   */\n  createdBy?: string\n}\n\nexport function sAccessTokenData() {\n  return S.object()\n    .additionalProperties(false)\n    .prop('signature', S.string())\n    .required()\n    .prop('permission', S.string().enum(['READ', 'WRITE']))\n    .required()\n    .prop('userId', sStringId())\n    .prop('expirationDate', sDateString())\n}\n\nexport interface AccessTokenSignature {\n  userId?: string\n  tokenId: string\n}\n\nexport const ACCESS_TOKENS_ROUTES_KEY = 'access-tokens'\n\nexport enum AccessTokenRoutes {\n  v1Create = `v1/${ACCESS_TOKENS_ROUTES_KEY}`,\n  v1Delete = `v1/${ACCESS_TOKENS_ROUTES_KEY}/:accessTokenId`,\n}\n"],"names":["ACCESS_TOKENS_ROUTES_KEY","sAccessToken","sAccessTokenData","S","object","id","additionalProperties","prop","sStringId","description","required","sDateString","extend","string","enum","AccessTokenRoutes"],"mappings":";;;;;;;;;;;IAqEaA,wBAAwB;eAAxBA;;;;;IAnDGC,YAAY;eAAZA;;IAmCAC,gBAAgB;eAAhBA;;;;2EArDF;sBACyB;AAiBhC,SAASD;IACd,OAAOE,yBAAC,CAACC,MAAM,GACZC,EAAE,CAAC,gBACHC,oBAAoB,CAAC,OACrBC,IAAI,CAAC,OAAOC,IAAAA,eAAS,KACrBC,WAAW,CAAC,oBACZC,QAAQ,GACRH,IAAI,CAAC,aAAaI,IAAAA,iBAAW,KAC7BF,WAAW,CAAC,+BACZC,QAAQ,GACRH,IAAI,CAAC,aAAaC,IAAAA,eAAS,KAC3BC,WAAW,CAAC,2CACZC,QAAQ,GACRE,MAAM,CAACV;AACZ;AAqBO,SAASA;IACd,OAAOC,yBAAC,CAACC,MAAM,GACZE,oBAAoB,CAAC,OACrBC,IAAI,CAAC,aAAaJ,yBAAC,CAACU,MAAM,IAC1BH,QAAQ,GACRH,IAAI,CAAC,cAAcJ,yBAAC,CAACU,MAAM,GAAGC,IAAI,CAAC;QAAC;QAAQ;KAAQ,GACpDJ,QAAQ,GACRH,IAAI,CAAC,UAAUC,IAAAA,eAAS,KACxBD,IAAI,CAAC,kBAAkBI,IAAAA,iBAAW;AACvC;AAOO,MAAMX,2BAA2B;;UAE5Be;sDACC,CAAC,GAAG,EAAEf,yBAAyB,CAAC;sDAChC,CAAC,GAAG,EAAEA,yBAAyB,eAAe,CAAC;GAFhDe,sBAAAA"}